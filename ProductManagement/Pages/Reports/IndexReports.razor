@page "/reports"
@using System.Linq.Expressions
@using Microsoft.JSInterop
@using Microsoft.AspNetCore.Components
@inject IJSRuntime JSRuntime
@using ProductManagement.Data;

<PageTitle>Reports</PageTitle>

<h1>Reports</h1>

<div class="w-100 d-flex">
    <button class="btn btn-success btn-sm m-2" @onclick="@(e => RenderReportViewer(Const.GlobalVariables.Customer))">Customer report</button>
    <button class="btn btn-warning btn-sm m-2" @onclick="@(e => RenderReportViewer(Const.GlobalVariables.Item))">Item report</button>
    <button class="btn btn-info btn-sm m-2" @onclick="@(e => RenderReportViewer(Const.GlobalVariables.CustomerItem))">Customer item report</button>
</div>

<div id="report-viewer" style="width: 100%;height: 950px"></div>

@code {
    // ReportViewer options
    BoldReportViewerOptions viewerOptions = new BoldReportViewerOptions();

    // Used to render the Bold Report Viewer component in Blazor page.
    public async void RenderReportViewer(string report)
    {
        viewerOptions.ReportPath = report;
        viewerOptions.ReportServiceURL = "/api/ReportViewer";
        await JSRuntime.InvokeVoidAsync("BoldReports.RenderViewer", "report-viewer", viewerOptions);
    }
}